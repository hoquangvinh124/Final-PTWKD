<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" type="text/css" href="homepage_main.css">
        <link rel="stylesheet" type="text/css" href="header-footer.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <title>Retro Queue – Homepage</title>
    </head>
    <body>
        <div class="loading-portal" id="loadingPortal" role="alert" aria-live="assertive" aria-hidden="true">
            <div class="loading-shell" role="status">
                <div class="loading-vinyl" data-fast-forward>
                    <div class="vinyl-center">
                        <span>Retro</span>
                        <span>Queue</span>
                    </div>
                    <span class="vinyl-spark"></span>
                </div>
                <div class="loading-countdown">
                    <span class="count" data-countdown>3</span>
                    <span class="label">giây còn lại</span>
                </div>
                <div class="loading-progress">
                    <div class="progress-track">
                        <div class="progress-bar" data-progress style="--progress:0"></div>
                    </div>
                    <div class="progress-eq" aria-hidden="true">
                        <span data-eq-bar></span>
                        <span data-eq-bar></span>
                        <span data-eq-bar></span>
                        <span data-eq-bar></span>
                        <span data-eq-bar></span>
                    </div>
                </div>
                <p class="loading-message" data-message>Đang xử lý yêu cầu...</p>
                <p class="loading-fact" data-fact>Đang làm ấm đèn âm ly để giữ chất âm chuẩn analog.</p>
                <p class="loading-tip" data-tip>Nhấn phím F để tua nhanh hoặc chạm vào đĩa vinyl phát sáng.</p>
                <button type="button" class="loading-skip" data-action="skip">Bỏ qua hiệu ứng</button>
            </div>
        </div>

        <div class="page-shell">
            <header class="site-header">
                <div class="announcement-bar" role="note">
                    <p>Miễn phí giao hàng toàn quốc cho đơn Retro từ 1.500.000₫ · Thu mua &amp; trao đổi cassette, CD, VHS theo yêu cầu</p>
                </div>
                <nav class="navbar section-content">
                    <div class="header-top">
                        <a href="#" class="nav-logo" aria-label="Retro Queue homepage">
                            <img src="assets/images/shopname.jpg" width="150" height="60" alt="Retro Queue logo">
                        </a>
                        <div class="header-icons" role="group" aria-label="Lối tắt điều hướng">
                            <button type="button" class="header-icon search-btn" aria-label="Tìm kiếm" title="Tìm kiếm">
                                <i class="fa-solid fa-magnifying-glass" aria-hidden="true"></i>
                            </button>
                            <button type="button" class="header-icon cart-btn" id="cartButton" aria-expanded="false" aria-controls="cartModal" title="Giỏ hàng">
                                <span class="sr-only">Mở giỏ hàng</span>
                                <i class="fa-solid fa-cart-shopping" aria-hidden="true"></i>
                                <span class="badge" id="cartBadge"></span>
                            </button>
                            <button type="button" class="header-icon user-btn" aria-label="Tài khoản" title="Tài khoản">
                                <i class="fa-regular fa-user" aria-hidden="true"></i>
                            </button>
                        </div>
                    </div>
                    <ul class="nav-menu" role="menubar">
                        <li class="nav-item" role="none">
                            <a href="#" class="nav-link" role="menuitem">AUDIO</a>
                            <ul class="submenu">
                                <li><a href="#" class="submenu-link">CD</a></li>
                                <li><a href="#" class="submenu-link">VINYL</a></li>
                            </ul>
                        </li>
                        <li class="nav-item" role="none"><a href="#" class="nav-link" role="menuitem">VHS</a></li>
                        <li class="nav-item" role="none"><a href="#" class="nav-link" role="menuitem">CaSSETTE TAPE</a></li>
                        <li class="nav-item" role="none"><a href="#" class="nav-link" role="menuitem">POLA CAMERA</a></li>
                        <li class="nav-item" role="none">
                            <a href="#" class="nav-link" role="menuitem">ACCESSORIES</a>
                            <ul class="submenu">
                                <li><a href="#" class="submenu-link">CASSETTE PLAYER</a></li>
                                <li><a href="#" class="submenu-link">IPOD</a></li>
                                <li><a href="#" class="submenu-link">CD PLAYER</a></li>
                            </ul>
                        </li>
                        <li class="nav-item" role="none"><a href="#" class="nav-link" role="menuitem">POLA CAMERA</a></li>
                        <li class="nav-item" role="none"><a href="#" class="nav-link" role="menuitem">CINE ROOM</a></li>
                        <li class="nav-item" role="none"><a href="#" class="nav-link" role="menuitem">THREAD</a></li>
                    </ul>
                </nav>
            </header>

            <main class="site-main">
                <section class="hero-section" aria-labelledby="heroTitle">
                    <div class="hero-media">
                        <img src="assets/images/main-banner.jpg" alt="Retro Sound main banner" class="main-banner">
                        <div class="hero-overlay"></div>
                    </div>
                    <div class="hero-content">
                        <p class="eyebrow">Âm thanh cổ điển cho thế hệ mới</p>
                        <h1 id="heroTitle">Khám phá kho báu Retro Sound</h1>
                        <p class="hero-description">Từ vinyl nguyên bản, máy ảnh pola cho đến cassette hiếm – tất cả được tuyển chọn để giúp bạn sống lại kỷ nguyên vàng của âm nhạc và điện ảnh.</p>
                        <div class="hero-actions">
                            <a href="#" class="btn-retro primary">Khám phá ngay</a>
                            <a href="#" class="btn-retro ghost">Xem bộ sưu tập</a>
                        </div>
                        <div class="hero-captions">
                            <span>Chọn lọc từ hơn 20 bộ sưu tập retro</span>
                            <span>Dịch vụ vệ sinh &amp; cân chỉnh đầu đọc miễn phí</span>
                        </div>
                    </div>
                </section>

                <section class="featured-panels" aria-label="Danh mục nổi bật">
                    <div class="panels-intro">
                        <h2>Góc phối cho tín đồ analog</h2>
                        <p>Đặt những combo ăn ý giữa đĩa vinyl, cassette và máy phát huyền thoại để tái tạo không khí phòng thu thập niên 80 ngay tại nhà.</p>
                    </div>
                    <div class="panels-grid">
                        <div class="panel primary-panel">
                            <img src="assets/images/Banner1.jpg" alt="Banner 1">
                            <div class="panel-copy">
                                <h3>Vinyl Corner</h3>
                                <p>Phiên bản first press, limited edition và các bản tái bản hiếm.</p>
                                <a href="#" class="text-link">Khám phá đĩa vinyl độc bản</a>
                            </div>
                        </div>
                        <div class="panel-stack">
                            <div class="panel">
                                <img src="assets/images/Banner2.jpg" alt="Banner 2">
                                <div class="panel-copy">
                                    <h3>Classic Cassette</h3>
                                    <p>Âm sắc băng từ nguyên bản, đã cân chỉnh lại đầu từ.</p>
                                    <a href="#" class="text-link">Chọn ngay mixtape yêu thích</a>
                                </div>
                            </div>
                            <div class="panel">
                                <img src="assets/images/Banner3.jpg" alt="Banner 3">
                                <div class="panel-copy">
                                    <h3>Retro VHS</h3>
                                    <p>Dải phim nhuốm màu thời gian, xem lại huyền thoại thập niên 90.</p>
                                    <a href="#" class="text-link">Săn bộ boxset giới hạn</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="story" aria-labelledby="storyTitle">
                    <div class="story-inner">
                        <div class="story-copy">
                            <p class="eyebrow">Retro Sound Studio</p>
                            <h2 id="storyTitle">Cảm hứng từ những phòng thu thập niên 80</h2>
                            <p>Chúng tôi săn tìm từng cuộn băng, từng chiếc máy ảnh cũ trên khắp thế giới, phục chế bằng tay và kiểm tra thủ công trước khi đưa đến tay bạn. Bộ sưu tập tại Retro Sound được tuyển chọn bởi những người yêu âm nhạc và nghệ thuật analog, để mỗi sản phẩm đều mang câu chuyện riêng.</p>
                            <a href="#" class="text-link">Tìm hiểu thêm về hành trình của chúng tôi</a>
                        </div>
                        <div class="story-visual">
                            <div class="story-card">
                                <img src="assets/images/Cassette%20Tape/1.jpg" alt="Cassette collection">
                                <div class="card-glow"></div>
                            </div>
                            <div class="story-stats">
                                <div>
                                    <span class="stat-number">250+</span>
                                    <span class="stat-label">Bản thu giới hạn</span>
                                </div>
                                <div>
                                    <span class="stat-number">50</span>
                                    <span class="stat-label">Máy ảnh pola phục chế</span>
                                </div>
                                <div>
                                    <span class="stat-number">30</span>
                                    <span class="stat-label">Sự kiện nghe thử mỗi năm</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="retro-promises" aria-label="Cam kết dịch vụ Retro Queue">
                    <div class="promise-grid">
                        <article class="promise-card">
                            <h3>Bảo hành chuẩn phòng thu</h3>
                            <p>Mỗi đầu đọc và máy cassette được căn chỉnh, thay băng curoa và đo tracking trước khi giao.</p>
                        </article>
                        <article class="promise-card">
                            <h3>Bọc gói chống ẩm chuyên dụng</h3>
                            <p>Đảm bảo chất lượng băng từ &amp; đĩa qua hành trình vận chuyển đến tay bạn.</p>
                        </article>
                        <article class="promise-card">
                            <h3>Đổi trả trong 7 ngày</h3>
                            <p>Trải nghiệm âm sắc tại nhà, hoàn tiền nếu sản phẩm không đúng mô tả hoặc chất lượng.</p>
                        </article>
                    </div>
                </section>

                <section class="best-seller-area" aria-labelledby="bestSellerTitle">
                    <div class="section-heading">
                        <div>
                            <p class="eyebrow">Danh mục được săn đón</p>
                            <h2 id="bestSellerTitle">Best Sellers</h2>
                        </div>
                        <p class="section-subtitle">Các bản phát hành luôn trong tình trạng cháy hàng – cập nhật hàng tuần với số lượng giới hạn.</p>
                    </div>
                    <div class="grid" id="productGrid">
                        <div class="box" height="200px">
                            <div class="item" id="sku-1" data-name="VHS 13" data-price="$90.00" data-img="assets/images/VHS/13.jpg">
                                <div class="thumb">
                                    <div class="hover-content">
                                        <ul>
                                            <li><a href="#"><i class="heart-icon"></i></a></li>
                                            <li><button class="btn add"><i class="shopping-bag-icon"></i></button></li>
                                        </ul>
                                    </div>
                                    <img src="assets/images/VHS/13.jpg" alt="Air Force 1 X" class="main-image">
                                    <img src="assets/images/VHS/14.jpg" alt="Air Force 1 X Hover" class="hover-image">
                                </div>
                                <div class="down-content">
                                    <h4>VHS 13</h4>
                                    <div class="product-price">
                                        <span class="current">$90.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="box" height="200px">
                            <div class="item" data-id="sku-1" data-name="Audio Vinyl 13" data-price="$90.00" data-img="assets/images/Audio/Vinyl/13.jpg">
                                <div class="thumb">
                                    <div class="hover-content">
                                        <ul>
                                            <li><a href="#"><i class="heart-icon"></i></a></li>
                                            <li><button class="btn add"><i class="shopping-bag-icon"></i></button></li>
                                        </ul>
                                    </div>
                                    <img src="assets/images/Audio/Vinyl/13.jpg" alt="Air Force 1 X" class="main-image">
                                    <img src="assets/images/Audio/Vinyl/14.jpg" alt="Air Force 1 X Hover" class="hover-image">
                                </div>
                                <div class="down-content">
                                    <h4>Audio Vinyl 13</h4>
                                    <div class="product-price">
                                        <span class="current">$90.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="box" height="200px">
                            <div class="item" data-id="sku-3" data-name="Cassette Tape 17" data-price="$90.00" data-img="assets/images/Cassette%20Tape/17.jpg">
                                <div class="thumb">
                                    <div class="hover-content">
                                        <ul>
                                            <li><a href="#"><i class="heart-icon"></i></a></li>
                                            <li><button class="btn add"><i class="shopping-bag-icon"></i></button></li>
                                        </ul>
                                    </div>
                                    <img src="assets/images/Cassette%20Tape/17.jpg" alt="Air Force 1 X" class="main-image">
                                    <img src="assets/images/Cassette%20Tape/18.jpg" alt="Air Force 1 X Hover" class="hover-image">
                                </div>
                                <div class="down-content">
                                    <h4>Cassette Tape 17</h4>
                                    <div class="product-price">
                                        <span class="current">$90.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="box" height="200px">
                            <div class="item" data-id="sku-4" data-name="Pola Camera 11" data-price="$90.00" data-img="assets/images/Pola%20Camera/11.jpg">
                                <div class="thumb">
                                    <div class="hover-content">
                                        <ul>
                                            <li><a href="#"><i class="heart-icon"></i></a></li>
                                            <li><button class="btn add"><i class="shopping-bag-icon"></i></button></li>
                                        </ul>
                                    </div>
                                    <img src="assets/images/Pola%20Camera/11.jpg" alt="Air Force 1 X" class="main-image">
                                    <img src="assets/images/Pola%20Camera/12.jpg" alt="Air Force 1 X Hover" class="hover-image">
                                </div>
                                <div class="down-content">
                                    <h4>Pola Camera 11</h4>
                                    <div class="product-price">
                                        <span class="current">$90.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="box" height="200px">
                            <div class="item" data-id="sku-5" data-name="IPod 8" data-price="$90.00" data-img="assets/images/Accessories/IPod/8.jpg">
                                <div class="thumb">
                                    <div class="hover-content">
                                        <ul>
                                            <li><a href="#"><i class="heart-icon"></i></a></li>
                                            <li><button class="btn add"><i class="shopping-bag-icon"></i></button></li>
                                        </ul>
                                    </div>
                                    <img src="assets/images/Accessories/IPod/8.jpg" alt="Air Force 1 X" class="main-image">
                                    <img src="assets/images/Accessories/IPod/9.jpg" alt="Air Force 1 X Hover" class="hover-image">
                                </div>
                                <div class="down-content">
                                    <h4>IPod 8</h4>
                                    <div class="product-price">
                                        <span class="current">$90.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="box" height="200px">
                            <div class="item" data-id="sku-6" data-name="CD Player 13" data-price="$90.00" data-img="assets/images/Accessories/CD%20Player/13.jpg">
                                <div class="thumb">
                                    <div class="hover-content">
                                        <ul>
                                            <li><a href="#"><i class="heart-icon"></i></a></li>
                                            <li><button class="btn add"><i class="shopping-bag-icon"></i></button></li>
                                        </ul>
                                    </div>
                                    <img src="assets/images/Accessories/CD%20Player/13.jpg" alt="Air Force 1 X" class="main-image">
                                    <img src="assets/images/Accessories/CD%20Player/14.jpg" alt="Air Force 1 X Hover" class="hover-image">
                                </div>
                                <div class="down-content">
                                    <h4>CD Player 13</h4>
                                    <div class="product-price">
                                        <span class="current">$90.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="box" height="200px">
                            <div class="item" data-id="sku-7" data-name="Pola Camera 15" data-price="$90.00" data-img="assets/images/Pola%20Camera/15.jpg">
                                <div class="thumb">
                                    <div class="hover-content">
                                        <ul>
                                            <li><a href="#"><i class="heart-icon"></i></a></li>
                                            <li><button class="btn add"><i class="shopping-bag-icon"></i></button></li>
                                        </ul>
                                    </div>
                                    <img src="assets/images/Pola%20Camera/15.jpg" alt="Air Force 1 X" class="main-image">
                                    <img src="assets/images/Pola%20Camera/16.jpg" alt="Air Force 1 X Hover" class="hover-image">
                                </div>
                                <div class="down-content">
                                    <h4>Pola Camera 15</h4>
                                    <div class="product-price">
                                        <span class="current">$90.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="box" height="200px">
                            <div class="item" data-id="sku-8" data-name="Audio Vinyl 14" data-img="assets/images/Audio/Vinyl/14.jpg">
                                <div class="thumb">
                                    <div class="hover-content">
                                        <ul>
                                            <li><a href="#"><i class="heart-icon"></i></a></li>
                                            <li><button class="btn add"><i class="shopping-bag-icon"></i></button>
                                            </li>
                                        </ul>
                                    </div>
                                    <img src="assets/images/Audio/Vinyl/14.jpg" alt="Air Force 1 X" class="main-image">
                                    <img src="assets/images/Audio/Vinyl/15.jpg" alt="Air Force 1 X Hover" class="hover-image">
                                </div>
                                <div class="down-content">
                                    <h4>Audio Vinyl 14</h4>
                                    <div class="product-price">
                                        <span class="current">$90.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="box" height="200px">
                            <div class="item" data-id="sku-9" data-name="VHS 39" data-price="$90.00" data-img="assets/images/VHS/39.jpg">
                                <div class="thumb">
                                    <div class="hover-content">
                                        <ul>
                                            <li><a href="#"><i class="heart-icon"></i></a></li>
                                            <li><button class="btn add"><i class="shopping-bag-icon"></i></button></li>
                                        </ul>
                                    </div>
                                    <img src="assets/images/VHS/39.jpg" alt="Air Force 1 X" class="main-image">
                                    <img src="assets/images/VHS/40.jpg" alt="Air Force 1 X Hover" class="hover-image">
                                </div>
                                <div class="down-content">
                                    <h4>VHS 39</h4>
                                    <div class="product-price">
                                        <span class="current">$90.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="box" height="200px">
                            <div class="item" data-id="sku-10" data-name="VHS 13" data-price="$90.00" data-img="assets/images/VHS/13.jpg">
                                <div class="thumb">
                                    <div class="hover-content">
                                        <ul>
                                            <li><a href="#"><i class="heart-icon"></i></a></li>
                                            <li><button class="btn add">+ Add to cart</button></li>
                                        </ul>
                                    </div>
                                    <img src="assets/images/VHS/13.jpg" alt="Air Force 1 X" class="main-image">
                                    <img src="assets/images/VHS/14.jpg" alt="Air Force 1 X Hover" class="hover-image">
                                </div>
                                <div class="down-content">
                                    <h4>VHS 13</h4>
                                    <div class="product-price">
                                        <span class="current">$90.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="vaultzone" aria-label="Danh mục bộ sưu tập">
                    <div class="artifactz vinora">
                        <div class="titlemark">Vinyl</div>
                        <img src="assets/images/Vinyl_collection.gif" alt="Vinyl Record"/>
                        <div><a href="#" class="btn-retro">Shop Now</a></div>
                    </div>
                    <div class="artifactz tapella">
                        <div class="titlemark">Cassettes</div>
                        <div class="cd-container">
                            <img src="assets/images/Cassette%20Tape/1.jpg" alt="Cassette Tape">
                        </div>
                        <div><a href="#" class="btn-retro">Shop Now</a></div>
                    </div>
                    <div class="artifactz discara">
                        <div class="titlemark">CDs</div>
                        <img src="assets/images/cd.gif" alt="Compact Disc">
                        <div><a href="#" class="btn-retro">Shop Now</a></div>
                    </div>
                </section>

                <section class="new-arrivals" aria-labelledby="newArrivalsTitle">
                    <div class="section-heading">
                        <div>
                            <p class="eyebrow">Phát hành mới cập bến</p>
                            <h2 id="newArrivalsTitle">New Arrivals</h2>
                        </div>
                        <p class="section-subtitle">Trình diễn vòng xoay của các sản phẩm mới nhất vừa cập bến Retro Queue.</p>
                    </div>
                    <div class="slider" style="--width: 180px; --height:180px; --quantity: 10;">
                        <div class="list">
                            <div class="item" style="--position: 1"><a href=""><img src="assets/images/Pola%20Camera/1.jpg" alt=""></a></div>
                            <div class="item" style="--position: 2"><img src="assets/images/Audio/Vinyl/14.jpg" alt=""></div>
                            <div class="item" style="--position: 3"><img src="assets/images/Cassette%20Tape/15.jpg" alt=""></div>
                            <div class="item" style="--position: 4"><img src="assets/images/VHS/6.jpg" alt=""></div>
                            <div class="item" style="--position: 5"><img src="assets/images/Cassette%20Tape/1.jpg" alt=""></div>
                            <div class="item" style="--position: 6"><img src="assets/images/Audio/CD/6.jpg" alt=""></div>
                            <div class="item" style="--position: 7"><img src="assets/images/Pola%20Camera/2.jpg" alt=""></div>
                            <div class="item" style="--position: 8"><img src="assets/images/VHS/17.jpg" alt=""></div>
                            <div class="item" style="--position: 9"><img src="assets/images/Cassette%20Tape/8.jpg" alt=""></div>
                            <div class="item" style="--position: 10"><img src="assets/images/Audio/CD/18.jpg" alt=""></div>
                        </div>
                    </div>
                    <div class="slider slider-offset" style="--width: 180px; --height: 180px; --quantity: 10;">
                        <div class="list">
                            <div class="item" style="--position: 1"><img src="assets/images/Cassette%20Tape/1.jpg" alt=""></div>
                            <div class="item" style="--position: 2"><img src="assets/images/Accessories/CD%20Player/1.jpg" alt=""></div>
                            <div class="item" style="--position: 3"><img src="assets/images/Accessories/IPod/1.jpg" alt=""></div>
                            <div class="item" style="--position: 4"><img src="assets/images/Accessories/Cassette%20Player/16.jpg" alt=""></div>
                            <div class="item" style="--position: 5"><img src="assets/images/Audio/CD/19.jpg" alt=""></div>
                            <div class="item" style="--position: 6"><img src="assets/images/Cassette%20Tape/19.jpg" alt=""></div>
                            <div class="item" style="--position: 7"><img src="assets/images/Cassette%20Tape/15.jpg" alt=""></div>
                            <div class="item" style="--position: 8"><img src="assets/images/Pola%20Camera/10.jpg" alt=""></div>
                            <div class="item" style="--position: 9"><img src="assets/images/Pola%20Camera/17.jpg" alt=""></div>
                            <div class="item" style="--position: 10"><img src="assets/images/VHS/20.jpg" alt=""></div>
                        </div>
                    </div>
                </section>

                <section class="wrapper" aria-label="Thư viện cảm hứng">
                    <div class="footer-gallery">
                        <input type="radio" name="slide" id="c1" checked>
                        <label for="c1" class="card"></label>
                        <input type="radio" name="slide" id="c2" checked>
                        <label for="c2" class="card"></label>
                        <input type="radio" name="slide" id="c3" checked>
                        <label for="c3" class="card"></label>
                        <input type="radio" name="slide" id="c4" checked>
                        <label for="c4" class="card"></label>
                        <input type="radio" name="slide" id="c5" checked>
                        <label for="c5" class="card"></label>
                    </div>
                </section>
            </main>

            <footer class="site-footer">
                <div class="footer-upper">
                    <div class="footer-brand">
                        <a href="#" class="nav-logo" aria-label="Retro Queue">
                            <img src="assets/images/shopname.jpg" width="150" height="60" alt="Retro Queue logo">
                        </a>
                        <p>Retro Queue là điểm hẹn cho cộng đồng yêu thích âm thanh analog và điện ảnh cổ điển tại Việt Nam.</p>
                    </div>
                    <div class="footer-newsletter">
                        <h3>Nhận sóng Retro hàng tuần</h3>
                        <form class="newsletter-form">
                            <label for="newsletterEmail" class="sr-only">Email</label>
                            <input type="email" id="newsletterEmail" placeholder="Email của bạn">
                            <button type="submit" class="btn-retro">Đăng ký</button>
                        </form>
                        <p class="newsletter-note">Ưu đãi độc quyền, playlist mixtape và thông tin sự kiện private listening.</p>
                    </div>
                    <div class="socialIcons">
                        <a href=""><i class="fa-brands fa-facebook"></i></a>
                        <a href=""><i class="fa-brands fa-instagram"></i></a>
                        <a href=""><i class="fa-brands fa-twitter"></i></a>
                        <a href=""><i class="fa-brands fa-google-plus"></i></a>
                        <a href=""><i class="fa-brands fa-youtube"></i></a>
                    </div>
                </div>
                <div class="footer-lower">
                    <div class="footerNav">
                        <ul>
                            <li><a href="">HOME</a></li>
                            <li><a href="">NEWS</a></li>
                            <li><a href="">PRODUCTS</a></li>
                            <li><a href="">CONTACT US</a></li>
                        </ul>
                    </div>
                    <p class="footer-credit">© 2024 Retro Queue. Crafted cho cộng đồng yêu âm thanh cổ điển.</p>
                </div>
            </footer>
        </div>

        <div class="overlay" id="overlay" tabindex="-1" aria-hidden="true"></div>
        <section class="modal" id="cartModal" role="dialog" aria-modal="true" aria-labelledby="cartTitle">
            <div class="modal-head">
                <div id="cartTitle" class="modal-title">GIỎ HÀNG</div>
                <button class="x" id="closeModal" aria-label="Đóng"></button>
            </div>
            <div class="modal-body" id="cartList">
                <div class="empty" id="emptyState">Chưa có sản phẩm.</div>
            </div>
            <div class="modal-foot">
                <div class="sum"><span>Tổng</span><span id="grandTotal">0₫</span></div>
                <div class="actions">
                    <button class="btn secondary">GIỎ HÀNG</button>
                    <button class="btn">THANH TOÁN</button>
                </div>
                <a href="#" class="continue" id="continueLink">TIẾP TỤC MUA HÀNG</a>
            </div>
        </section>

        <script>
const $ = (selector, parent = document) => parent.querySelector(selector);
const $$ = (selector, parent = document) => Array.from(parent.querySelectorAll(selector));

const loadingPortal = (() => {
    const root = $('#loadingPortal');
    const vinyl = root?.querySelector('.loading-vinyl');
    const skipBtn = root?.querySelector('[data-action="skip"]');
    const progress = root?.querySelector('[data-progress]');
    const countdown = root?.querySelector('[data-countdown]');
    const factEl = root?.querySelector('[data-fact]');
    const messageEl = root?.querySelector('[data-message]');
    const tipEl = root?.querySelector('[data-tip]');
    const eqBars = root ? Array.from(root.querySelectorAll('[data-eq-bar]')) : [];

    const facts = {
        cart: [
            'Băng từ đang quay vun vút!'
        ],
        travel: [
            'Đang làm ấm đèn âm ly để giữ chất âm chuẩn analog.'
        ]
    };

    let speed = 1;
    let rafId = null;
    let resolver = null;

    function updateEq() {
        eqBars.forEach((bar) => {
            bar.style.setProperty('--h', `${Math.random() * 80 + 20}%`);
        });
    }

    function setProgress(value) {
        if (progress) {
            progress.style.setProperty('--progress', value);
        }
    }

    function finish() {
        root?.classList.remove('active', 'turbo');
        root?.setAttribute('aria-hidden', 'true');
        if (rafId) cancelAnimationFrame(rafId);
        rafId = null;
        if (resolver) resolver();
        resolver = null;
    }

    function loop() {
        if (!root?.classList.contains('active')) return;
        speed = Math.max(1, speed * 0.985);
        const current = parseFloat(progress?.style.getPropertyValue('--progress') || '0');
        const next = Math.min(1, current + 0.005 * speed);
        setProgress(next);
        if (next >= 1) {
            finish();
            return;
        }
        rafId = requestAnimationFrame(loop);
    }

    function play({ seconds = 3, message, factType, after } = {}) {
        if (!root) return Promise.resolve();
        if (root.classList.contains('active')) return Promise.resolve();

        speed = 1;
        setProgress(0);
        updateEq();

        if (message && messageEl) messageEl.textContent = message;
        if (factEl) {
            const options = facts[factType] || facts.travel;
            factEl.textContent = options[Math.floor(Math.random() * options.length)] || facts.travel[0];
        }
        if (tipEl) tipEl.textContent = 'Nhấn phím F để tua nhanh hoặc chạm vào đĩa vinyl phát sáng.';

        if (countdown) countdown.textContent = Math.ceil(seconds).toString();

        const start = Date.now();
        const duration = seconds * 1000;

        function tick() {
            if (!root.classList.contains('active')) return;
            const elapsed = Date.now() - start;
            const remaining = Math.max(0, duration - elapsed);
            const secondsLeft = Math.ceil(remaining / 1000);
            if (countdown) countdown.textContent = secondsLeft.toString();
            if (remaining <= 0) {
                finish();
                return;
            }
            requestAnimationFrame(tick);
        }

        root.classList.add('active');
        root.classList.remove('turbo');
        root.setAttribute('aria-hidden', 'false');
        updateEq();
        setProgress(0);

        requestAnimationFrame(tick);
        loop();

        return new Promise((resolve) => {
            resolver = () => {
                after?.();
                resolve();
            };
        });
    }

    function fastForward() {
        if (!root?.classList.contains('active')) return;
        speed = Math.min(speed + 1.5, 6);
        root.classList.add('turbo');
        if (messageEl) messageEl.textContent = `Chế độ tua nhanh x${speed.toFixed(1)}`;
        if (factEl) factEl.textContent = 'Băng từ đang quay vun vút!';
        if (tipEl) tipEl.textContent = 'Nhấn ESC để bỏ qua hoặc giữ F để tăng tốc.';
    }

    function cancel() {
        if (!root?.classList.contains('active')) return;
        if (factEl) factEl.textContent = 'Đã bỏ qua hiệu ứng.';
        finish();
    }

    skipBtn?.addEventListener('click', (event) => {
        event.preventDefault();
        cancel();
    });

    vinyl?.addEventListener('click', (event) => {
        event.preventDefault();
        fastForward();
    });

    document.addEventListener('keydown', (event) => {
        if (!root?.classList.contains('active')) return;
        const key = event.key.toLowerCase();
        if (key === 'f') {
            event.preventDefault();
            fastForward();
        }
        if (key === 'escape') {
            event.preventDefault();
            cancel();
        }
    });

    root?.addEventListener('pointermove', () => {
        if (root.classList.contains('active')) updateEq();
    });

    return {
        play,
        cancel,
        fastForward,
        isActive: () => root?.classList.contains('active')
    };
})();

const els = {
    btn: $('#cartButton'),
    overlay: $('#overlay'),
    modal: $('#cartModal'),
    close: $('#closeModal'),
    list: $('#cartList'),
    empty: $('#emptyState'),
    total: $('#grandTotal'),
    grid: $('#productGrid'),
    badge: $('#cartBadge'),
    cont: $('#continueLink')
};

const state = {
    items: []
};

const fmt = new Intl.NumberFormat('vi-VN', {
    style: 'currency',
    currency: 'VND'
});

function openModal() {
    if (!els.overlay || !els.modal || !els.btn || !els.close) return;
    els.overlay.classList.add('show');
    els.modal.classList.add('show');
    els.btn.setAttribute('aria-expanded', 'true');
    setTimeout(() => els.close?.focus(), 0);
}

function closeModal() {
    if (!els.overlay || !els.modal || !els.btn) return;
    els.overlay.classList.remove('show');
    els.modal.classList.remove('show');
    els.btn.setAttribute('aria-expanded', 'false');
    els.btn.focus();
}

function updateBadge() {
    if (!els.badge) return;
    const n = state.items.reduce((sum, item) => sum + item.qty, 0);
    els.badge.textContent = n;
    els.badge.classList.toggle('show', n > 0);
}

function render() {
    if (!els.list || !els.total) return;
    els.list.innerHTML = '';
    if (state.items.length === 0) {
        if (els.empty) {
            els.empty.style.display = 'block';
            els.list.appendChild(els.empty);
        }
    } else {
        if (els.empty) els.empty.style.display = 'none';
        state.items.forEach((it) => {
            const row = document.createElement('div');
            row.className = 'line';
            row.innerHTML = `
                <img src="${it.img}" alt="${it.name}" width="72" height="72" style="border-radius:8px; object-fit:cover">
                <div>
                    <h4>${it.name}</h4>
                    <div class="muted-sm">${fmt.format(it.price)}</div>
                    <button class="remove" data-id="${it.id}">Xóa</button>
                </div>
                <div style="display:grid; gap:6px; justify-items:end">
                    <div class="qty" role="group" aria-label="Số lượng">
                        <button class="dec" data-id="${it.id}" aria-label="Giảm">−</button>
                        <input type="text" inputmode="numeric" value="${it.qty}" aria-label="Số lượng hiện tại">
                        <button class="inc" data-id="${it.id}" aria-label="Tăng">+</button>
                    </div>
                    <div class="line-total">${fmt.format(it.price * it.qty)}</div>
                </div>
            `;
            els.list.appendChild(row);
        });
    }
    const total = state.items.reduce((sum, item) => sum + item.price * item.qty, 0);
    els.total.textContent = fmt.format(total);
    updateBadge();
}

function add(prod) {
    const productName = prod.name || 'sản phẩm';
    loadingPortal.play({
        seconds: 3.2,
        message: `Đang tua băng để thêm “${productName}” vào giỏ...`,
        factType: 'cart',
        after: () => {
            const existing = state.items.find((item) => item.id === prod.id);
            if (existing) existing.qty += 1;
            else state.items.push({ ...prod, qty: 1 });
            render();
            openModal();
        }
    });
}

function setQty(id, qty) {
    const item = state.items.find((it) => it.id === id);
    if (!item) return;
    item.qty = Math.max(1, Math.min(999, Number(qty) || 1));
    render();
}

function removeItem(id) {
    state.items = state.items.filter((it) => it.id !== id);
    render();
}

const loadingLinks = [
    ...$$('.nav-menu > li > a.nav-link'),
    ...$$('.nav-menu .submenu-link'),
    ...$$('.header-icons .header-icon'),
    ...$$('.footerNav a'),
    ...$$('.socialIcons a'),
    $('.story .text-link')
].filter(Boolean);

loadingLinks.forEach((link) => {
    link.dataset.loadingTrigger = 'true';
    if (!link.dataset.loadingMessage) {
        const label = link.textContent?.trim();
        link.dataset.loadingMessage = label ? `Đang chuẩn bị "${label}"...` : 'Đang chuyển trang...';
    }
    link.dataset.loadingSeconds = link.dataset.loadingSeconds || (link.classList.contains('text-link') ? '2.4' : '2.8');
    link.dataset.loadingTheme = link.dataset.loadingTheme || 'travel';
});

document.addEventListener('click', (event) => {
    const trigger = event.target.closest('[data-loading-trigger]');
    if (!trigger) return;
    if (trigger.dataset.loadingDisabled === 'true') return;
    const href = trigger.getAttribute('href');
    const seconds = parseFloat(trigger.dataset.loadingSeconds) || 2.6;
    const message = trigger.dataset.loadingMessage || 'Đang chuyển trang...';
    const factType = trigger.dataset.loadingTheme || 'travel';

    if (!href || href === '#') {
        event.preventDefault();
        loadingPortal.play({ seconds, message, factType });
        return;
    }

    event.preventDefault();
    loadingPortal.play({
        seconds,
        message,
        factType,
        after: () => {
            window.location.href = href;
        }
    });
});

els.grid?.addEventListener('click', (event) => {
    const btn = event.target.closest('.add');
    if (!btn) return;
    const item = event.target.closest('.item');
    if (!item) return;

    const rawPrice = item.dataset.price ? parseFloat(item.dataset.price.replace(/[^0-9.]/g, '')) : 90;
    const price = Math.round(rawPrice * 23000);
    const img = item.dataset.img || item.querySelector('img.main-image')?.src;
    const fallbackId = item.dataset.id || item.id || item.dataset.name || img || `sku-${Date.now()}`;

    add({
        id: String(fallbackId),
        name: item.dataset.name || item.querySelector('h4')?.textContent?.trim() || 'Sản phẩm',
        price,
        img
    });
});

els.btn?.addEventListener('click', () => {
    if (!loadingPortal.isActive()) openModal();
});

els.overlay?.addEventListener('click', closeModal);
els.close?.addEventListener('click', closeModal);
els.cont?.addEventListener('click', (event) => {
    event.preventDefault();
    if (!loadingPortal.isActive()) closeModal();
});

document.addEventListener('keydown', (event) => {
    if (event.key === 'Escape' && !loadingPortal.isActive()) {
        closeModal();
    }
});

els.list?.addEventListener('click', (event) => {
    const target = event.target;
    if (target.classList.contains('inc')) setQty(target.dataset.id, (state.items.find((i) => i.id === target.dataset.id)?.qty || 1) + 1);
    if (target.classList.contains('dec')) setQty(target.dataset.id, (state.items.find((i) => i.id === target.dataset.id)?.qty || 1) - 1);
    if (target.classList.contains('remove')) removeItem(target.dataset.id);
});

els.list?.addEventListener('input', (event) => {
    const input = event.target;
    if (input.tagName !== 'INPUT') return;
    const row = input.closest('.line');
    if (!row) return;
    const id = row.querySelector('.inc')?.dataset.id;
    if (!id) return;
    const newQty = input.value.replace(/\D/g, '');
    setQty(id, newQty);
});

render();
        </script>
    </body>
</html>
